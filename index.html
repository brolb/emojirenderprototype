<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Emoji Renderer Test</title>
  <style>
    body {
      font-family: sans-serif;
      font-size: 20px;
    }
    img.emoji {
      width: 1em;
      height: 1em;
      vertical-align: middle;
      display: inline-block;
    }
  </style>
</head>
<body>
  <div id="output">[Loading renderer...]</div>

  <script type="module">
    import { parse } from 'https://cdn.skypack.dev/twemoji-parser';

    const text = "Smileys & Emotion<br>face-smiling<br>â„–	Code	Emoji<br>1	U+1F600	ğŸ˜€<br>2	U+1F603	ğŸ˜ƒ<br>3	U+1F604	ğŸ˜„<br>4	U+1F601	ğŸ˜<br>5	U+1F606	ğŸ˜†<br>6	U+1F605	ğŸ˜…<br>7	U+1F923	ğŸ¤£<br>8	U+1F602	ğŸ˜‚<br>9	U+1F642	ğŸ™‚<br>10	U+1F643	ğŸ™ƒ<br>11	U+1FAE0	ğŸ« <br>12	U+1F609	ğŸ˜‰<br>13	U+1F60A	ğŸ˜Š<br>14	U+1F607	ğŸ˜‡<br>face-affection<br>â„–	Code	Emoji<br>15	U+1F970	ğŸ¥°<br>16	U+1F60D	ğŸ˜<br>17	U+1F929	ğŸ¤©<br>18	U+1F618	ğŸ˜˜<br>19	U+1F617	ğŸ˜—<br>20	U+263A	â˜º<br>21	U+1F61A	ğŸ˜š<br>22	U+1F619	ğŸ˜™<br>23	U+1F972	ğŸ¥²<br>face-tongue<br>â„–	Code	Emoji<br>24	U+1F60B	ğŸ˜‹<br>25	U+1F61B	ğŸ˜›<br>26	U+1F61C	ğŸ˜œ<br>27	U+1F92A	ğŸ¤ª<br>28	U+1F61D	ğŸ˜<br>29	U+1F911	ğŸ¤‘<br>face-hand<br>â„–	Code	Emoji<br>30	U+1F917	ğŸ¤—<br>31	U+1F92D	ğŸ¤­<br>32	U+1FAE2	ğŸ«¢<br>33	U+1FAE3	ğŸ«£<br>34	U+1F92B	ğŸ¤«<br>35	U+1F914	ğŸ¤”<br>36	U+1FAE1	ğŸ«¡<br>face-neutral-skeptical<br>â„–	Code	Emoji<br>37	U+1F910	ğŸ¤<br>38	U+1F928	ğŸ¤¨<br>39	U+1F610	ğŸ˜<br>40	U+1F611	ğŸ˜‘<br>41	U+1F636	ğŸ˜¶<br>42	U+1FAE5	ğŸ«¥<br>43	U+1F636 U+200D U+1F32B U+FE0F	ğŸ˜¶â€ğŸŒ«ï¸<br>44	U+1F60F	ğŸ˜<br>45	U+1F612	ğŸ˜’<br>46	U+1F644	ğŸ™„<br>47	U+1F62C	ğŸ˜¬<br>48	U+1F62E U+200D U+1F4A8	ğŸ˜®â€ğŸ’¨<br>49	U+1F925	ğŸ¤¥<br>50	U+1FAE8	ğŸ«¨<br>51	U+1F642 U+200D U+2194 U+FE0F	ğŸ™‚â€â†”ï¸<br>52	U+1F642 U+200D U+2195 U+FE0F	ğŸ™‚â€â†•ï¸<br>face-sleepy<br>â„–	Code	Emoji<br>53	U+1F60C	ğŸ˜Œ<br>54	U+1F614	ğŸ˜”<br>55	U+1F62A	ğŸ˜ª<br>56	U+1F924	ğŸ¤¤<br>57	U+1F634	ğŸ˜´<br>58	U+1FAE9	ğŸ«©<br>face-unwell<br>â„–	Code	Emoji<br>59	U+1F637	ğŸ˜·<br>60	U+1F912	ğŸ¤’<br>61	U+1F915	ğŸ¤•<br>62	U+1F922	ğŸ¤¢<br>63	U+1F92E	ğŸ¤®<br>64	U+1F927	ğŸ¤§<br>65	U+1F975	ğŸ¥µ<br>66	U+1F976	ğŸ¥¶<br>67	U+1F974	ğŸ¥´<br>68	U+1F635	ğŸ˜µ<br>69	U+1F635 U+200D U+1F4AB	ğŸ˜µâ€ğŸ’«<br>70	U+1F92F	ğŸ¤¯<br>face-hat<br>â„–	Code	Emoji<br>71	U+1F920	ğŸ¤ <br>72	U+1F973	ğŸ¥³<br>73	U+1F978	ğŸ¥¸<br>face-glasses<br>â„–	Code	Emoji<br>74	U+1F60E	ğŸ˜<br>75	U+1F913	ğŸ¤“<br>76	U+1F9D0	ğŸ§<br>face-concerned<br>â„–	Code	Emoji<br>77	U+1F615	ğŸ˜•<br>78	U+1FAE4	ğŸ«¤<br>79	U+1F61F	ğŸ˜Ÿ<br>80	U+1F641	ğŸ™<br>81	U+2639	â˜¹<br>82	U+1F62E	ğŸ˜®<br>83	U+1F62F	ğŸ˜¯<br>84	U+1F632	ğŸ˜²<br>85	U+1F633	ğŸ˜³<br>86	U+1F97A	ğŸ¥º<br>87	U+1F979	ğŸ¥¹<br>88	U+1F626	ğŸ˜¦<br>89	U+1F627	ğŸ˜§<br>90	U+1F628	ğŸ˜¨<br>91	U+1F630	ğŸ˜°<br>92	U+1F625	ğŸ˜¥<br>93	U+1F622	ğŸ˜¢<br>94	U+1F62D	ğŸ˜­<br>95	U+1F631	ğŸ˜±<br>96	U+1F616	ğŸ˜–<br>97	U+1F623	ğŸ˜£<br>98	U+1F61E	ğŸ˜<br>99	U+1F613	ğŸ˜“<br>100	U+1F629	ğŸ˜©<br>101	U+1F62B	ğŸ˜«<br>102	U+1F971	ğŸ¥±<br>face-negative<br>â„–	Code	Emoji<br>103	U+1F624	ğŸ˜¤<br>104	U+1F621	ğŸ˜¡<br>105	U+1F620	ğŸ˜ <br>106	U+1F92C	ğŸ¤¬<br>107	U+1F608	ğŸ˜ˆ<br>108	U+1F47F	ğŸ‘¿<br>109	U+1F480	ğŸ’€<br>110	U+2620	â˜ <br>face-costume<br>â„–	Code	Emoji<br>111	U+1F4A9	ğŸ’©<br>112	U+1F921	ğŸ¤¡<br>113	U+1F479	ğŸ‘¹<br>114	U+1F47A	ğŸ‘º<br>115	U+1F47B	ğŸ‘»<br>116	U+1F47D	ğŸ‘½<br>117	U+1F47E	ğŸ‘¾<br>118	U+1F916	ğŸ¤–<br>cat-face<br>â„–	Code	Emoji<br>119	U+1F63A	ğŸ˜º<br>120	U+1F638	ğŸ˜¸<br>121	U+1F639	ğŸ˜¹<br>122	U+1F63B	ğŸ˜»<br>123	U+1F63C	ğŸ˜¼<br>124	U+1F63D	ğŸ˜½<br>125	U+1F640	ğŸ™€<br>126	U+1F63F	ğŸ˜¿<br>127	U+1F63E	ğŸ˜¾<br>monkey-face<br>â„–	Code	Emoji<br>128	U+1F648	ğŸ™ˆ<br>129	U+1F649	ğŸ™‰<br>130	U+1F64A	ğŸ™Š<br>heart<br>â„–	Code	Emoji<br>131	U+1F48C	ğŸ’Œ<br>132	U+1F498	ğŸ’˜<br>133	U+1F49D	ğŸ’<br>134	U+1F496	ğŸ’–<br>135	U+1F497	ğŸ’—<br>136	U+1F493	ğŸ’“<br>137	U+1F49E	ğŸ’<br>138	U+1F495	ğŸ’•<br>139	U+1F49F	ğŸ’Ÿ<br>140	U+2763	â£<br>141	U+1F494	ğŸ’”<br>142	U+2764 U+FE0F U+200D U+1F525	â¤ï¸â€ğŸ”¥<br>143	U+2764 U+FE0F U+200D U+1FA79	â¤ï¸â€ğŸ©¹<br>144	U+2764	â¤<br>145	U+1FA77	ğŸ©·<br>146	U+1F9E1	ğŸ§¡<br>147	U+1F49B	ğŸ’›<br>148	U+1F49A	ğŸ’š<br>149	U+1F499	ğŸ’™<br>150	U+1FA75	ğŸ©µ<br>151	U+1F49C	ğŸ’œ<br>152	U+1F90E	ğŸ¤<br>153	U+1F5A4	ğŸ–¤<br>154	U+1FA76	ğŸ©¶<br>155	U+1F90D	ğŸ¤<br>emotion<br>â„–	Code	Emoji<br>156	U+1F48B	ğŸ’‹<br>157	U+1F4AF	ğŸ’¯<br>158	U+1F4A2	ğŸ’¢<br>159	U+1F4A5	ğŸ’¥<br>160	U+1F4AB	ğŸ’«<br>161	U+1F4A6	ğŸ’¦<br>162	U+1F4A8	ğŸ’¨<br>163	U+1F573	ğŸ•³<br>164	U+1F4AC	ğŸ’¬<br>165	U+1F441 U+FE0F U+200D U+1F5E8 U+FE0F	ğŸ‘ï¸â€ğŸ—¨ï¸<br>166	U+1F5E8	ğŸ—¨<br>167	U+1F5EF	ğŸ—¯<br>168	U+1F4AD	ğŸ’­<br>169	U+1F4A4	ğŸ’¤<br>";
    const emojiBasePath = 'emojis/';

    function emojiToFilename(emoji) {
      return Array.from(emoji)
        .map(c => c.codePointAt(0).toString(16))
        .join('-') + '.png';
    }

    function renderTextWithEmojis(text) {
      const container = document.createElement('span');
      const emojiTokens = parse(text);
      let currentIndex = 0;

      for (const token of emojiTokens) {
        if (token.indices[0] > currentIndex) {
          const beforeText = text.slice(currentIndex, token.indices[0]);
          container.appendChild(document.createTextNode(beforeText));
        }

        const filename = emojiToFilename(token.text);
        const img = document.createElement('img');
        img.className = 'emoji';
        img.src = emojiBasePath + filename;
        img.alt = token.text;
        container.appendChild(img);

        currentIndex = token.indices[1];
      }

      if (currentIndex < text.length) {
        container.appendChild(document.createTextNode(text.slice(currentIndex)));
      }

      return container;
    }

    document.getElementById('output').textContent = ''; // clear "[Loading renderer...]"
    document.getElementById('output').appendChild(renderTextWithEmojis(text));
  </script>
</body>
</html>